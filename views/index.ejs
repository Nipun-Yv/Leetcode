<!DOCTYPE html>
<%var easyAcceptancePercentage=(easySubmissionsAccepted/easySubmissionsTotal*100)%>
<%easyAcceptancePercentage=parseFloat(easyAcceptancePercentage.toFixed(2))%>
<%var hardAcceptancePercentage=(hardSubmissionsAccepted/hardSubmissionsTotal*100)%>
<%hardAcceptancePercentage=parseFloat(hardAcceptancePercentage.toFixed(2))%>
<%var mediumAcceptancePercentage=(mediumSubmissionsAccepted/mediumSubmissionsTotal*100)%>
<%mediumAcceptancePercentage=parseFloat(mediumAcceptancePercentage.toFixed(2))%>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>User Stats</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="/styles/index.css" rel="stylesheet"/>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:ital,wght@0,100;0,300;0,400;0,500;0,700;0,900;1,100;1,300;1,400;1,500;1,700;1,900&display=swap" rel="stylesheet">

</head>
<body>
    <!--Grid main 7 divs hain, main second wale main badges daal rahan hun aur third main submissions, baaki 5 tere + login page-->
    <div class="container">
        <div class="username">
            <h1><%=username%>.</h1>
        </div>
        
        <div class="badges">
            <%if(badges.length==0){%>
            <img src="/images/not-available.png">
            <%}else{%>
            <%for(var i=0;i<badges.length;i++){%>
                <img src='<%=badges[i]%>' hidden>
            <%}}%>
            <button><img src="/images/arrow.png"></button>
        </div>

        <div class="submissions">
            <div><h1>Submissions</h1></div>
            <%for(var i=0;i<submissions.length-1;i++){%>
            <div><p><%=submissions[i]%></p></div>
            <%}%>
        </div>
        <div class="progress-bar">
            <div>
                <div><h3>E</h3></div>
                <div><h3>A</h3></div>
                <div><h3>S</h3></div>
                <div><h3>Y</h3></div>
                <%for(var i=0;i<16;i++){%>
                    <div></div>
                <%}%>
                <div><h3 style="color:rgb(49, 49, 141);margin-top:20%"><%=(Math.ceil(easySolved/totalSolved*100))%>%</h3></div>
            </div>
            <div>
                <div><h3>M</h3></div>
                <div><h3>E</h3></div>
                <div><h3>D</h3></div>
                <div><h3>I</h3></div>
                <div><h3>U</h3></div>
                <div><h3>M</h3></div>
                <%for(var i=0;i<14;i++){%>
                    <div></div>
                <%}%>
                <div><h3 style="color:rgb(49, 49, 141);margin-top:20%"><%=(Math.ceil(mediumSolved/totalSolved*100))%>%</h3></div>
            </div>
            <div>
                <div><h3>H</h3></div>
                <div><h3>A</h3></div>
                <div><h3>R</h3></div>
                <div><h3>D</h3></div>
                <%for(var i=0;i<16;i++){%>
                    <div></div>
                <%}%>
                <div><h3 style="color:rgb(49, 49, 141);margin-top:20%"><%=(Math.ceil(hardSolved/totalSolved*100))%>%</h3></div>
            </div>
            <div class="solved">
                <div><h3>Easy</h3>
                    <h2><%=easySolved%></h2>
                    <p>/814</p>
                </div>
                <div><h3>Medium</h3>
                    <h2><%=mediumSolved%></h2>
                    <p>/1699</p>
                </div>
                <div><h3>Hard</h3>
                    <h2><%=hardSolved%></h2>
                    <p>/723</p>
                </div>
            </div>
        </div>
        <div class="pie-chart ">
            <section class="min-h-full ">
                <div class="progress-bar-container]">
                    <div class="circle-container mx-auto">
                        <svg class="progress-circle mx-auto mt-5
                        " viewBox="0 0 400 400" width="400" height="400">
                            <circle class="base-circle" cx="200" cy="200" r="200" stroke="white" stroke-width="20" fill="none"></circle>
                            <path class="easy-arc" fill="none" stroke="green" stroke-width="10"></path>
                            <path class="medium-arc" fill="none" stroke="yellow" stroke-width="10"></path>
                            <path class="hard-arc" fill="none" stroke="red" stroke-width="10"></path>
                        </svg>
                        <div class="circle-text text-[22px] text-[rgb(255,215,0)] font-extrabold" id="circle-text">
                            <div class="total-text">Solved</div>
                            <div class="total-count"><%=totalSolved%></div>
                            <hr class="divider h-[2px]">
                            <div class="total-total">3236</div>
                        </div>
                    </div>
                </div>
                <div class="details-container mt-16 text-[26px] bg-[#213372] py-3 mx-2 rounded-sm
                font-extrabold flex justify-between items-center" style="border-radius:6px">
                    <div class="detail easy text-[rgb(255,215,0)]" data-acceptance="Easy:23">
                        <span class="">Easy : </span>
                        <span class="count"><%=easySolved%></span><span class="">/814</span>
                    </div>
                    <div class="detail medium text-[rgb(255,215,0)]" data-acceptance="Medium:41">
                        <span class="">Medium : </span>
                        <span class="count"><%=mediumSolved%></span>/<span class="">1699</span>
                    </div>
                    <div class="detail hard text-[rgb(255,215,0)]"  data-acceptance="Hard:5">
                        <span class="">Hard : </span>
                        <span class="count"><%=hardSolved%></span>/<span class="">723</span>
                    </div>
                </div>
            </section>
        </div>


        <div class="contest z-10  bg-gradient-to-r from-[rgb(28,43,97)] to-[rgb(85,85,168)]
        text-[rgb(255,184,6)] shadow-inner-[rgb(255,255,255)]  left-0">

        <h1 class="text-amber-600 text-center text-[40px]">Contests</h1>
            <%if(locals.contestAttend){%>

                <div class=" text-[25px] text-center" >
                    <script>'<%=contestGlobalRanking%>' =Math.ceil('<%=contestGlobalRanking%>')</script>
                   <div>
                   <div><p> Total contest</p></div><div><p> <%=contestAttend%></p></div>
                   </div>
                   <div>
                   <div><p>Contest Rating</p> </div><div><p><%=contestRating%></p></div>
                   </div>
                   <div>
                    <div><p>Contest ranking</p> </div><div><p><%=contestGlobalRanking%></p></div>
                    </div>
                    <div>
                        <div><p>Overall participants</p> </div><div><p><%=totalParticipants%></p></div>
                    </div>
                <p style="background-color:white;color:gold;
                    color: gold;
                    text-shadow:
                      0.5px 0.5px 0 navy,
                      -0.5px 0.5px 0 navy,
                      -0.5px -0.5px 0 navy,
                      0.5px -0.5px 0 navy;
                  ">Top <%=contestTopPercentage%>% of the total coders </p>
                </div>
            <%}else{%>
                <h2 class="mx-auto text-center h-10 text-[30px] text-red-600">No contests 
                    <br>attended</h2>
                
                
            <%}%>

        
        </div> 
        <div class="ranking">
            <!-- bg-gradient-to-r from-[rgb(28,43,97)] to-[rgb(85,85,168)] -->
             <p>WORLD RANKING</p>
             <div>            <h2>
              <%=ranking%></h2></div>

        </div>
    </div>
    <%=easySubmissionsAccepted%>
    <%=mediumSubmissionsAccepted%>
    <%=hardSubmissionsAccepted%>
    <%=easySubmissionsTotal%>
    <%=mediumSubmissionsTotal%>
    <%=hardSubmissionsTotal%>
    <%=easyAcceptancePercentage%>
    <%=mediumAcceptancePercentage%>
    <%=hardAcceptancePercentage%>
    <%=totalSolved%>
    <%=easySolved%>
    <%=mediumSolved%>
    <%=hardSolved%>
    <%=ranking%>
    <%=badges%>
    <%if(locals.contestAttend){%>
    <%=contestAttend%>
    <%=contestRating%>
    <%=contestGlobalRanking%>
    <%=totalParticipants%>
    <%=contestTopPercentage%>
    <%}else{%>
        <h2>No contests attended</h2>
    <%}%>
    <script type="text/javascript">
        var badges='<%=badges.length%>'
        var totalSolved='<%=totalSolved%>'
        var easySolved='<%=easySolved%>'
        console.log(easySolved)
        var mediumSolved='<%=mediumSolved%>'
        var hardSolved='<%=hardSolved%>'
        var easySubmissionsPerc='<%=easyAcceptancePercentage%>'
        var mediumSubmissionsPerc='<%=mediumAcceptancePercentage%>'
        var hardSubmissionsPerc='<%=hardAcceptancePercentage%>'
    </script>
    <script src="/scripts/index.js" charset="UTF-8"></script>
</body>
</html>
