<!DOCTYPE html>
<%var easyAcceptancePercentage=(easySubmissionsAccepted/easySubmissionsTotal*100)%>
<%easyAcceptancePercentage=parseFloat(easyAcceptancePercentage.toFixed(2))%>
<%var hardAcceptancePercentage=(hardSubmissionsAccepted/hardSubmissionsTotal*100)%>
<%hardAcceptancePercentage=parseFloat(hardAcceptancePercentage.toFixed(2))%>
<%var mediumAcceptancePercentage=(mediumSubmissionsAccepted/mediumSubmissionsTotal*100)%>
<%mediumAcceptancePercentage=parseFloat(mediumAcceptancePercentage.toFixed(2))%>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>User Stats</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="/styles/index.css" rel="stylesheet"/>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:ital,wght@0,100;0,300;0,400;0,500;0,700;0,900;1,100;1,300;1,400;1,500;1,700;1,900&display=swap" rel="stylesheet">

</head>
<body>
    <!--Grid main 7 divs hain, main second wale main badges daal rahan hun aur third main submissions, baaki 5 tere + login page-->
    <div class="container">
        <div class="username">
            <h1><%=username%>.</h1>
        </div>
        
        <div class="badges">
            <%if(badges.length==0){%>
            <img src="/images/not-available.png">
            <%}else{%>
            <%for(var i=0;i<badges.length;i++){%>
                <img src='<%=badges[i]%>' hidden>
            <%}}%>
            <button><img src="/images/arrow.png"></button>
        </div>

        <div class="submissions">
            <div><h1>Submissions</h1></div>
            <%for(var i=0;i<submissions.length-1;i++){%>
            <div><p><%=submissions[i]%></p></div>
            <%}%>
        </div>
        <div class="progress-bar">
            <div>
                <div><h3>E</h3></div>
                <div><h3>A</h3></div>
                <div><h3>S</h3></div>
                <div><h3>Y</h3></div>
                <%for(var i=0;i<16;i++){%>
                    <div></div>
                <%}%>
                <div><h3 style="color:rgb(49, 49, 141);margin-top:20%"><%=(Math.ceil(easySolved/totalSolved*100))%>%</h3></div>
            </div>
            <div>
                <div><h3>M</h3></div>
                <div><h3>E</h3></div>
                <div><h3>D</h3></div>
                <div><h3>I</h3></div>
                <div><h3>U</h3></div>
                <div><h3>M</h3></div>
                <%for(var i=0;i<14;i++){%>
                    <div></div>
                <%}%>
                <div><h3 style="color:rgb(49, 49, 141);margin-top:20%"><%=(Math.ceil(mediumSolved/totalSolved*100))%>%</h3></div>
            </div>
            <div>
                <div><h3>H</h3></div>
                <div><h3>A</h3></div>
                <div><h3>R</h3></div>
                <div><h3>D</h3></div>
                <%for(var i=0;i<16;i++){%>
                    <div></div>
                <%}%>
                <div><h3 style="color:rgb(49, 49, 141);margin-top:20%"><%=(Math.ceil(hardSolved/totalSolved*100))%>%</h3></div>
            </div>
            <div class="solved">
                <div><h3>Easy</h3>
                    <h2><%=easySolved%></h2>
                    <p>/814</p>
                </div>
                <div><h3>Medium</h3>
                    <h2><%=mediumSolved%></h2>
                    <p>/1699</p>
                </div>
                <div><h3>Hard</h3>
                    <h2><%=hardSolved%></h2>
                    <p>/723</p>
                </div>
            </div>
        </div>
        <div class="pie-chart   bg-gradient-to-r from-[rgb(28,43,97)] to-[rgb(85,85,168)]">
            <section class=" min-h-full  bg-gradient-to-r from-[rgb(28,43,97)] to-[rgb(85,85,168)]" >
                <div class="progress-bar-container  bg-gradient-to-r from-[rgb(28,43,97)] to-[rgb(85,85,168)]">
                    <div class="circle-container">
                        <svg class="progress-circle fill-[#000000]" viewBox="0 0 300 300" width="300" height="300" >
                            <circle class="base-circle" cx="150" cy="150" r="140" stroke="#e2e2e2" stroke-width="10" fill="#000000"></circle>
                            <circle class="easy-circle progress-segment" cx="150" cy="150" r="140" stroke="#64cea6" stroke-width="10" fill="#000000"></circle>
                            <circle class="medium-circle progress-segment" cx="150" cy="150" r="140" stroke="#2b84ea" stroke-width="10" fill="#000000"></circle>
                            <circle class="hard-circle progress-segment" cx="150" cy="150" r="140" stroke="#0b72e7" stroke-width="10" fill="#000000"></circle>
                        </svg>
                        <div class="circle-text text-[28px] text-amber-600" id="circle-text">
                            <div class="total-text">All</div>
                            <div class="total-count">69</div>
                            <hr class="divider">
                            <div class="total-total">3236</div>
                        </div>
                    </div>
                    </div>
                    <div class="details-container mt-2 text-[26px]">
                        <div class="detail easy text-green-500" data-acceptance="Easy:23">
                            <span>Easy</span>
                            <span class="count"><%=easySolved%></span>/<span class="-ml-[30px]">814</span>
                        </div>
                        <div class="detail medium text-amber-500" data-acceptance="Medium:41">
                            <span>Medium</span>
                            <span class="count"><%=mediumSolved%></span>/<span class="-ml-[30px]">1699</span>
                        </div>
                        <div class="detail hard text-red-500" data-acceptance="Hard:5">
                            <span>Hard</span>
                            <span class="count"><%=hardSolved%></span>/<span class="-ml-[30px]">723</span>
                        </div>
                    </div>
                
            </section>
    
        </div>

        <div class="contest z-10  bg-gradient-to-r from-[rgb(28,43,97)] to-[rgb(85,85,168)]
        text-[rgb(255,184,6)] shadow-inner-[rgb(255,255,255)]  left-0">

        <h1 class="text-amber-600 text-center text-[40px]">Contests</h1>
            <%if(locals.contestAttend){%>

                <div class="mx-auto my-2 text-[25px] text-center" >
                   <p> Total contest : <%=contestAttend%></p>
                   <br>
                <p>Contest Rating : <%=contestRating%></p>

                <br>
                <script>'<%=contestGlobalRanking%>' =Math.ceil('<%=contestGlobalRanking%>')</script>
                <p>Contest ranking: <%=contestGlobalRanking%></p>
                <br>
                <p>Overall participants:<%=totalParticipants%></p>
                <br>
                <p>Top <%=contestTopPercentage%>% of the total coders .</>
                </div>
            <%}else{%>
                <h2 class="mx-auto text-center h-10 text-[30px] text-red-600">No contests 
                    <br>attended</h2>
                
                
            <%}%>

        
        </div> 
        <div class="ranking">
            <!-- bg-gradient-to-r from-[rgb(28,43,97)] to-[rgb(85,85,168)] -->
             <p>WORLD RANKING</p>
             <div>            <h2>
              <%=ranking%></h2></div>

        </div>
    </div>
    <%=easySubmissionsAccepted%>
    <%=mediumSubmissionsAccepted%>
    <%=hardSubmissionsAccepted%>
    <%=easySubmissionsTotal%>
    <%=mediumSubmissionsTotal%>
    <%=hardSubmissionsTotal%>
    <%=easyAcceptancePercentage%>
    <%=mediumAcceptancePercentage%>
    <%=hardAcceptancePercentage%>
    <%=totalSolved%>
    <%=easySolved%>
    <%=mediumSolved%>
    <%=hardSolved%>
    <%=ranking%>
    <%=badges%>
    <%if(locals.contestAttend){%>
    <%=contestAttend%>
    <%=contestRating%>
    <%=contestGlobalRanking%>
    <%=totalParticipants%>
    <%=contestTopPercentage%>
    <%}else{%>
        <h2>No contests attended</h2>
    <%}%>
    <script type="text/javascript">
        var badges='<%=badges.length%>'
        var totalSolved='<%=totalSolved%>'
        var easySolved='<%=easySolved%>'
        console.log(easySolved)
        var mediumSolved='<%=mediumSolved%>'
        var hardSolved='<%=hardSolved%>'
        var easySubmissionsPerc='<%=easyAcceptancePercentage%>'
        var mediumSubmissionsPerc='<%=mediumAcceptancePercentage%>'
        var hardSubmissionsPerc='<%=hardAcceptancePercentage%>'
    </script>
    <script src="/scripts/index.js" charset="UTF-8"></script>
</body>
</html>
